# 需求和代办整理

- TODO:解决方案中添加运动监测的算法，检测到转盘开始转动，返回字符物料顺序，红绿蓝用123表示
- TODO:完成多边形的参数调试函数
- TODO:快速调试功能---将AdjustConfig和main重构，添加调试开关和编码器，使用远程图传+编码器的快速调参

## 外部调节的参数(config.json)

### 地面圆环的基准坐标

```json
{
    ...
    "annulus_point": {
        "x": 0,
        "y": 0
    }
}
```

### 转盘中心的基准坐标

```json
{
    ...
    "rotator_centre_point": {
        "x": 0,
        "y": 0
    }
}
```

### 地面圆环识别参数

```json
{
    ...
    "annulus": {
        "dp": 1,        //累加器分辨率与图像分辨率的反比,值越大，检测时间越短，但是可能会丢失一些小圆
        "minDist": 52,  //两个圆心之间的最小距离
        "param1": 60,   //Canny边缘检测的高阈值
        "param2": 20,   //累加器的阈值,值越大，检测时间越短，但是可能会丢失一些小圆
        "minRadius": 48,    //圆的最小半径
        "maxRadius": 52     //圆的最大半径
    }
}
```

### 物料圆环识别参数

```json
{
    ...
    "material": {
        "dp": 1,        //累加器分辨率与图像分辨率的反比,值越大，检测时间越短，但是可能会丢失一些小圆
        "minDist": 52,  //两个圆心之间的最小距离
        "param1": 60,   //Canny边缘检测的高阈值
        "param2": 20,   //累加器的阈值,值越大，检测时间越短，但是可能会丢失一些小圆
        "minRadius": 48,    //圆的最小半径
        "maxRadius": 52     //圆的最大半径
    }
}
```

### 多边形参数

```json
{
    ...
    "polygon":{
        "nums":3,   //多边形数,0为圆形
        "val_min": 50, //Canny边缘检测的低阈值
        "val_max": 150, //Canny边缘检测的高阈值
        "epsilon_factor": 0.02, //多边形近似的精度因子,值越小，近似的多边形越接近原始多边形
    }
}
```

### 直线识别参数

```json
{
    ...
    "LineDetector": {
        "Min_val": 120,         //Canny边缘检测的低阈值
        "Max_val": 255,         //Canny边缘检测的高阈值
        "Hough_threshold": 48,  //霍夫变换的阈值,值越大，检测时间越短，但是可能会丢失一些直线
        "minLineLength": 41,    //线段的最小长度
        "maxLineGap": 49,       //线段之间的最大间隔
        "bias": 3               //允许的角度误差
    }
}
```
